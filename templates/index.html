<!DOCTYPE html>
<html>
<head>
	<title>Charger Info Dashboard</title>
	<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='unified_style.css') }}">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
	<script src="{{url_for('static', filename='script.js')}}"></script>
</head>
<body class="dashboard-body">
	<div class="dashboard-container">
		<button class="nav-toggle" onclick="toggleNav()">â˜°</button>
		<div class="nav-overlay" onclick="toggleNav()"></div>
		
		<div class="sidebar">
			<div class="sidebar-header">
				<h1>Charger Info</h1>
			</div>
			<ul class="nav-menu">
				<li class="nav-item">
					<a href="home.html" target="mainframe" class="nav-link">
						<i class="fas fa-home"></i> Home
					</a>
				</li>
				<li class="nav-item">
					<a href="charger.html" target="mainframe" class="nav-link">
						<i class="fas fa-charging-station"></i> Charger
					</a>
				</li>
				<li class="nav-item">
					<a href="human_motion.html" target="mainframe" class="nav-link">
						<i class="fas fa-walking"></i> Human Motion
					</a>
				</li>
				<li class="nav-item">
					<a href="temp_humid.html" target="mainframe" class="nav-link">
						<i class="fas fa-temperature-high"></i> Temperature/Humidity
					</a>
				</li>
				<li class="nav-item">
					<a href="water.html" target="mainframe" class="nav-link">
						<i class="fas fa-tint"></i> Water Leakage
					</a>
				</li>
				<li class="nav-item">
					<a href="#" onclick="logoutConfirm()" class="nav-link logout-btn">
						<i class="fas fa-sign-out-alt"></i> Logout
					</a>
				</li>
			</ul>
		</div>
		
		<div class="main-content">
			<div class="iframe-container">
				<iframe id="mainframe" name="mainframe" src="home.html" frameborder="0" scrolling="yes"></iframe>
			</div>
		</div>
	</div>
	
	<script>
		// Add active class to current page link
		document.addEventListener('DOMContentLoaded', function() {
			const links = document.querySelectorAll('.nav-link');
			const currentPage = window.location.pathname.split('/').pop() || 'home.html';
			
			links.forEach(link => {
				const href = link.getAttribute('href');
				if (href === currentPage) {
					link.classList.add('active');
				}
				
				link.addEventListener('click', function() {
					links.forEach(l => l.classList.remove('active'));
					this.classList.add('active');
				});
			});
		});
		
		// Check if URL is directly accessed
		if(document.referrer === "") {
			window.location.href = "/";
		}
		
		// Logout confirmation
		function logoutConfirm() {
			if (confirm("Are you sure you want to logout?")) {
				window.location.href = "/";
			}
		}
		
		function toggleNav() {
			const nav = document.querySelector('.sidebar');
			const overlay = document.querySelector('.nav-overlay');
			nav.classList.toggle('active');
			overlay.classList.toggle('active');
		}
	</script>
</body>
</html>

